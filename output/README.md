# プログラミング授業の学生に対する変数名検討を支援するシステムの提案
本ソースコードは修論「プログラミング授業の学生に対する変数名検討を支援するシステムの提案」の成果物である。
本研究の目的は文章(課題説明文)と仮の変数名を用いて記述したコードを入力してもらい、仮変数名に対する妥当性の高い変数名を提案することである。

<hr>

##　研究のアプローチ
python抽象構文木を利用し、プログラムの抽象構文木に基づいて、各変数自身が抽象構文木中の構造を利用し、過去の同じテーマのコードと比較して類似度の高い変数名を抽出することで適切な変数名を提案する。

![user_image](https://raw.githubusercontent.com/wintor7/variable-name-support-system-base-on-AST/main/pic/used_image.png)

## データの収集
本研究で利用したデータセットはgithubと過去課題からもらう。get_data.ipynbでgithubからコードを収集する。過去課題のデータセットがアップロードしていない。

## ASTの抽出
ast_draw.pyが自動的に貰ったコードの抽象構文木を抽出し、そしてノードはASTのコンストラクタのグラフに変化する。まだグラフの各ノードを数値化する。
![user_image](https://raw.githubusercontent.com/wintor7/variable-name-support-system-base-on-AST/main/pic/change_ex.png)

## モデルの訓練と変数名の提案
### doc2vecの訓練と変数名の提案
trainning.ipynbを利用して、Doc2Vecのモデルを訓練する。訓練データはgithubと過去課題のコードである。そして、G2V.ipynbにテストファイルを入力し、コサイン類似度を踏まえて、類似度高いの変数名を提案する。

### N-gramの訓練と変数名の提案
Ngram.ipynbの前半ではモデルを訓練である。同様に、訓練データはgithubと過去課題のコードである。後半ではテストファイルの入力できる。同様にコサイン類似度を利用して、変数名を提案する。

<hr>

## マッチングのアプローチ
もし変数名で適切な記述された場合には、その変数がコード中で果たす役割を適切に説明できるので、意味の近い単語もこのコードの役割を説明できることが期待できる。よって、Word2Vecモデル利用する。GitHubリポジトリ(付録 A)から収集したドキュメントと、本実験で用意した課題説明文をコーパスとし、word2vecモデルにより学習を行った。学習済みモデルに対して、提案手法における変数の特徴ベクトル化までの変数名候補を入力し、それらと高い類似度(コサイン類似度 0.8 以上)となる名前を変数名候補に追加する。
![user_image](https://raw.githubusercontent.com/wintor7/variable-name-support-system-base-on-AST/main/pic/ex2_3.png)

## マッチング部分のデータ収集とモデルの訓練
本研究のマッチング部分で利用したデータセットは抽象構文木利用したコードの説明文である。get_documents.ipynb前半が訓練データの抽出と処理を行う。後半ではword2vecモデルの訓練である。訓練したモデルを保存する。

## マッチング
二つ変数名提案のコード最後でマッチングモデルを利用した。同様に、類似度高い単語を変数名候補として追加する。

<hr>

##　改良方向

- **データの抽出範囲により変数名の提案精度の上昇**
各変数の抽出範囲を関数 全体に広がる方法でより適切な変数名を提案することができると考える。まだ、各変数の抽出範囲内使った具体的な関数名を抽象構文木に付ける方法で提案精度を有効的に上げると考える。

<br>

- **モデルの調整により変数名の提案精度の上昇**
今回利用したモデルはDoc2VecとNgramので、他のモデルほうかより良い精度がある可能性がある。例えば、GPT3,BERTなど。

<br>

- **マッチング部の上昇**
意味の近い変数名を候補に追加する方法を改善するには、より適切な訓練データと処理方法を再検討することが必要と考える。

<br>

- **マッチング部分のアプローチ**
もしマッチング部分のベクトルが直接に抽象構文木部分と繋がるなら、より良い精度が出てくると考える。


